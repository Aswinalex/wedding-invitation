<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>You're Invited! - Taniya & Aswin</title>

    <!-- Thumbnail / Social Media Share Tags -->
    <meta property="og:title" content="You're Invited! - Taniya & Aswin's Wedding">
    <meta property="og:description" content="Join us in celebrating the wedding of Taniya and Aswin on January 5th, 2026 in Thiruvalla, Kerala.">
    <meta property="og:image" content="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/IMG-20250427-WA0089.jpg">
    <meta property="og:url" content="https://aswinalex.github.io/wedding-invitation/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,600;0,700;1,400&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles for the wedding invite */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0D4B4F;
            color: white;
            line-height: 1.7;
            overflow-x: hidden;
        }
        .object-cover {
            object-fit: cover;
        }
        
        .font-great-vibes {
            font-family: 'Great Vibes', cursive;
        }
        .hero-section {
            background: url('https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/IMG-20250427-WA0089.jpg') center 35%/cover no-repeat;
            color: #fff;
            text-shadow: 2px 2px 8px rgba(33,158,158,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            position: relative;
            overflow: hidden;
            background-attachment: fixed;
            animation: efficient-kenburns 80s ease-out infinite;
            transition: transform 80s ease-in-out;
        }
        .hero-content {
            position: relative;
            z-index: 2;
            background-color: rgba(13, 75, 79, 0.7);
            padding: 2rem;
            border-radius: 0.75rem;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            border: 1.5px solid rgba(255, 255, 255, 0.25);
            max-width: 48rem;
            margin: auto;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }
        /* Mobile-specific Ken Burns effect */
        @media (max-width: 640px) {
            .hero-section {
            animation: kenburns-mobile 30s ease-out infinite !important;
            background-position: center bottom;
            }
            @keyframes kenburns-mobile {
            0% {
                background-size: 120%;
                background-position: center bottom;
            }
            40% {
                background-size: 140%;
                background-position: center top;
            }
            60% {
                background-size: 140%;
                background-position: center top;
            }
            100% {
                background-size: 120%;
                background-position: center bottom;
            }
            }
        }

        /* Responsive for desktop */
        @media (min-width: 641px) and (max-width: 1000px) {
            .hero-section {
            animation: kenburns-desktop 80s ease-out infinite !important;
            background-position: center 35%;
            }
            @keyframes kenburns-desktop {
            0% {
                background-size: 105%;
                background-position: center 35%;
            }
            40% {
                background-size: 112%;
                background-position: center 45%;
            }
            60% {
                background-size: 112%;
                background-position: center 45%;
            }
            100% {
                background-size: 105%;
                background-position: center 35%;
            }
            }
        }
        @media (min-width: 1000px) {
            .hero-section {
            animation: kenburns-desktop 80s ease-out infinite !important;
            background-position: center 35%;
            }
            @keyframes kenburns-desktop {
            0% {
                background-size: 60%;
                background-position: center 35%;
            }
            40% {
                background-size: 100%;
                background-position: center 45%;
            }
            60% {
                background-size: 100%;
                background-position: center 45%;
            }
            100% {
                background-size: 60%;
                background-position: center 35%;
            }
            }
        }
        .bible-verse-ml {
            font-family: 'Poppins', sans-serif;
        }
        .animate-flip {
            animation: flip-number 0.5s ease-in-out;
        }
        .section-divider {
            position: relative;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem auto;
            animation: pulse-divider 2s infinite ease-in-out;
        }
        .section-divider::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: #FFD700;
            z-index: 0;
        }
        .section-divider::after {
            content: '';
            font-size: 2rem;
            color: #FFD700;
            background-color: #0D4B4F;
            padding: 0 10px;
            position: relative;
            z-index: 1;
        }
        .btn-primary {
            background-color: #FFD700;
            color: #0D4B4F;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            font-weight: 600;
            border: none;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        .btn-primary:hover {
            background: #E6C200;
            color: #0D4B4F;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #274690;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 10px;
        }
        .equation-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            min-height: 60vh;
            width: 100%;
            text-align: center;
        }
        .equation-section .video-bg {
            display: block;
            margin: 0 auto;
            width: 100%;
            height: auto;
            border-radius: 1rem;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.15);
            position: relative;
            z-index: 1;
            object-fit: contain;
        }
        .equation-section .hero-content {
            position: relative;
            z-index: 3;
            margin-top: 0px;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            background: rgba(13, 75, 79, 0.7);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.15);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        /* Responsive for mobile */
        @media (max-width: 800px) {
            .equation-section .video-bg {
                max-height: 300px;
            }
            .equation-section .hero-content {
                margin-top: -30px;
                padding: 1rem;
            }
        }
        @media (max-width: 800px) {
            .equation-section .video-bg {
            width: 100vw !important;
            min-width: 100vw !important;
            max-width: 100vw !important;
            left: 1%;
            right: 1%;
            margin-left: 0vw;
            margin-right: 0vw;
            position: relative;
            display: block;
            object-fit: contain;
            z-index: 3;
            border-radius: 0 !important;
            }
        }
        
        .event-box {
            position: relative;
            overflow: hidden;
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
            background-color: #1A6367;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            padding: 0;
            border-radius: 1rem;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .event-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.25);
        }
        .event-box-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, transparent, rgba(26,99,103,0.8));
            z-index: 1;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
        }
        .event-box-content {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            gap: 0.75rem;
        }
        
        .event-box img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 1rem;
            display: block;
        }

        .ceremony-reception-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 640px) {
            .ceremony-reception-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* For scroll animations */
        .fade-in-section {
            opacity: 0;
            transform: translateY(60px) scale(0.97);
            transition: opacity 1.6s cubic-bezier(0.4,0,0.2,1), transform 3s cubic-bezier(0.4,0,0.2,1);
            will-change: opacity, transform;
            background-color: transparent !important;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* --- Masonry Grid with uniform height and hover effect --- */
        .masonry-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }
        .masonry-item {
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            cursor: pointer;
            width: 100%;
        }
        .masonry-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }
        /* UPDATED: Removed fixed height for responsive images */
        .masonry-item img {
            width: 100%;
            height: auto; /* Automatically adjust height based on width */
            max-height: 300px; /* Prevents extremely tall images on desktop */
            object-fit: contain;
            display: block;
        }
        .masonry-caption {
            background-color: rgba(13, 75, 79, 0.7);
            padding: 1rem;
            text-align: center;
        }
        @media (min-width: 640px) {
            .masonry-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .masonry-item img {
            width: 100%;
            height: auto; /* Automatically adjust height based on width */
            max-height: 600px; /* Prevents extremely tall images on desktop */
            object-fit: cover;
            display: block;
            }
        @media (min-width: 1024px) {
            .masonry-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .masonry-item img {
            width: 100%;
            height: auto; /* Automatically adjust height based on width */
            max-height: 600px; /* Prevents extremely tall images on desktop */
            object-fit: cover;
            display: block;
            }
        }
        /* --- End of Masonry Grid styles --- */
        
        /* --- Hover effect for Meet Our Family section --- */
        .family-member-card {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            cursor: pointer;
        }
        .family-member-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .text-dark { color: #FFD700; }
        .text-light { color: white; }
        .menu-section, .rsvp-section, .guestbook-section, .dresscode-section, .local-favorites-section, .wedding-party-section, .bg-wedding-section {
            background-color: #1A6367;
        }
        .menu-section .menu-content {
            background-color: #1A6367;
        }
        .local-favorites-section > div > div {
            border-color: #1A6367;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background-color: #0D4B4F;
        }
        .local-favorites-section > div > div:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(56, 54, 46, 0.3);
        }
        .local-favorites-section a {
            color: #800000;
            font-weight: bold;
        }
        .bg-white {
            background-color: #1A6367;
        }
        .bg-gray-200 {
            background-color: #1A6367;
        }
        .text-gray-700 {
            color: #FFD700;
        }
        .text-gray-600 {
            color: #ccc;
        }
        .text-red-600 {
            background-color: #FFD700;
            color: #0D4B4F;
        }
        .text-green-600 {
            color: #38a169;
        }
        .border-gray-300 {
            border-color: white;
        }
        .border-dark\/20 {
            border-color: #fff;
        }
        .text-black { color: white; }
        #guestbookDisplay {
            background-color: #1A6367;
            border: 1px solid #FFD700;
            border-radius: 0.5rem;
            padding: 1.5rem;
            text-align: left;
            min-height: 150px;
            color: white;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }
        #guestbookDisplay .message {
            border-bottom: 1px solid #FFD700;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }
        #guestbookDisplay .message:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        

        
        
        
        
        
        @media (max-width: 640px) {
            .py-16 {
                padding-top: 2rem !important;
                padding-bottom: 2rem !important;
            }
            .px-4 {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }
        }

        /* 5. Responsive Heading Sizes: Use smaller headings on mobile */
        @media (max-width: 640px) {
            .text-6xl, .text-8xl, .text-5xl {
                font-size: 2rem !important;
                line-height: 2.5rem !important;
            }
            .text-4xl, .text-3xl {
                font-size: 1.5rem !important;
                line-height: 2rem !important;
            }
        }

        
        
        
        
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes pulse-divider {
            0%, 100% { transform: scaleX(1); opacity: 1; }
            50% { transform: scaleX(1.05); opacity: 0.8; }
        }
        @keyframes flip-number {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(90deg); }
            100% { transform: rotateX(0); }
        }
        
        footer {
            background-color: #0D4B4F;
            color: white;
        }
        footer .text-2xl, footer .text-sm, footer .text-xs {
            color: white;
        }
    </style>
</head>
<body class="antialiased">
    
    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black bg-opacity-50" style="backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center">
            <h3 class="text-lg font-semibold mb-4 text-dark">Are you sure?</h3>
            <p class="text-gray-600 mb-6">Do you really want to delete this message? This action cannot be undone.</p>
            <div class="flex justify-center gap-4">
                <button id="cancelDelete" class="px-6 py-2 rounded-full text-gray-700 bg-gray-200 hover:bg-gray-300">Cancel</button>
                <button id="confirmDelete" class="px-6 py-2 rounded-full text-white bg-red-600 hover:bg-red-700">Delete</button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <header id="heroSection" class="hero-section text-center p-4">
        <div class="hero-content">
            <p class="text-lg md:text-5xl mb-4 font-great-vibes text-white">
                Together with our families
            </p>
            <h1 class="text-6xl md:text-8xl font-bold mb-6 font-great-vibes text-white">Taniya</h1>
            <p class="text-xl md:text-4xl mb-2 font-great-vibes text-white">
                Daughter of Mr. Binny Mathew and Mrs. Laly Binny
            </p>

            <h1 class="text-6xl md:text-8xl font-bold mb-6 font-great-vibes text-white">Aswin</h1>
            <p class="text-xl md:text-4xl mb-2 font-great-vibes text-white">
                Son of Dr. Salim C Eapen & Mrs. Renu Thomas
            </p>
            <p class="text-xl md:text-4xl mt-6 font-great-vibes text-white">
                Invite you to join us in celebrating our love
            </p>
        </div>
    </header>
    <!-- Countdown Timer Section -->
    <section class="py-8 px-4 text-center bg-dark text-white">
        <h2 class="text-3xl md:text-4xl font-great-vibes mb-4" style="color: #ff7b00;">Counting down to the big day!</h2>
        <div id="countdown" class="grid grid-cols-4 gap-4 max-w-md mx-auto text-center">
            <div>
                <div id="days" class="text-4xl md:text-6xl font-semibold font-great-vibes" style="color: #ff7b00;">00</div>
                <div class="text-sm uppercase tracking-wider" style="color: #ff7b00;">Days</div>
            </div>
            <div>
                <div id="hours" class="text-4xl md:text-6xl font-semibold font-great-vibes" style="color: #ff7b00;">00</div>
                <div class="text-sm uppercase tracking-wider" style="color: #ff7b00;">Hours</div>
            </div>
            <div>
                <div id="minutes" class="text-4xl md:text-6xl font-semibold font-great-vibes" style="color: #ff7b00;">00</div>
                <div class="text-sm uppercase tracking-wider" style="color: #ff7b00;">Minutes</div>
            </div>
            <div>
                <div id="seconds" class="text-4xl md:text-6xl font-semibold font-great-vibes" style="color: #ff7b00;">00</div>
                <div class="text-sm uppercase tracking-wider" style="color: #ff7b00;">Seconds</div>
            </div>
        </div>
    </section>

    <!-- Bible Verse Section -->
    <section class="py-16 px-4 text-center bg-wedding-section fade-in-section">
        <div class="max-w-3xl mx-auto relative z-10">
            <!-- Glassy overlay -->
            <div style="
                position: absolute;
                inset: 0;
                z-index: 0;
                border-radius: 1rem;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(4px);
                -webkit-backdrop-filter: blur(4px);
                box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            "></div>
            <div class="relative z-10 bg-transparent rounded-xl p-8 shadow-lg">
                <p class="text-2xl italic text-white" style="font-family: 'Poppins', sans-serif;">"And over all these virtues put on love, which binds them all together in perfect unity."</p>
                <p class="text-lg mt-2 text-white" style="font-family: 'Poppins', sans-serif;">- Colossians 3:14</p>
                <div class="section-divider"></div>
                <p class="text-2xl italic bible-verse-ml"><span lang="ml" class="text-white">"‡¥à ‡¥é‡¥≤‡µç‡¥≤‡¥æ‡¥±‡µç‡¥±‡¥ø‡¥®‡µÅ‡¥Ç ‡¥Æ‡µÄ‡¥§‡µÜ ‡¥∏‡¥Æ‡µç‡¥™‡µÇ‡µº‡¥£‡µç‡¥£‡¥§‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥¨‡¥®‡µç‡¥ß‡¥Æ‡¥æ‡¥Ø ‡¥∏‡µç‡¥®‡µá‡¥π‡¥Ç ‡¥ß‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï."</span></p>
                <p class="text-lg mt-2 text-white" style="font-family: 'Poppins', sans-serif;">- ‡¥ï‡µä‡¥≤‡µã‡¥∏‡µç‡¥Ø‡µº 3:14</p>
            </div>
        </div>
    </section>

    <!-- Details Section (Ceremony & Reception with Directions) -->
    <section class="bg-wedding-section py-16 px-4 text-center fade-in-section">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">The Ceremony & Reception</h2>
            <div class="section-divider"></div>
            <div class="ceremony-reception-grid">
                <!-- Ceremony -->
                <div>
                    <p class="text-base md:text-xl text-white mb-4">St. Thomas Mar Thoma Church, Thiruvalla ‚Äî a timeless symbol of faith, tradition, and grace, offering a serene and sacred setting to begin a beautiful journey of love and togetherness.</p>
                    <div class="event-box rounded-xl shadow-lg w-full overflow-hidden">
                        <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/church.jpg" alt="St Thomas Mar Thoma Church" class="absolute inset-0 w-full h-full object-cover rounded-xl"/>
                        <div class="event-box-content">
                            <h3 class="text-3xl md:text-4xl font-great-vibes mb-2 text-white drop-shadow-lg">Wedding Ceremony</h3>
                            <p class="text-lg md:text-xl font-semibold text-white drop-shadow-lg">January 5th, 2026 ‚Ä¢ 3:00 PM</p>
                            <p class="text-lg md:text-xl text-white drop-shadow-lg">St Thomas Mar Thoma Church</p>
                            <p class="text-lg md:text-xl text-white drop-shadow-lg">Thiruvalla, Kerala</p>
                            <a href="https://www.google.com/maps/search/?api=1&query=St+Thomas+Mar+Thoma+Church,+Thiruvalla,+Pathanamthitta,+Kerala" target="_blank" rel="noopener noreferrer" class="btn-primary mt-3 inline-block">Get Directions</a>
                        </div>
                    </div>
                </div>
                <!-- Reception -->
                <div>
                    <p class="text-base md:text-xl text-white mb-4">Mor Athanasius Yohan Memorial Convention Centre ‚Äî a stunning venue blending modern elegance with heartfelt tradition, perfect for celebrating our special day with style.</p>
                    <div class="event-box rounded-xl shadow-lg w-full overflow-hidden">
                        <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/hall.jpg" alt="Mor Athanasius Yohan Memorial Convention Centre" class="absolute inset-0 w-full h-full object-cover rounded-xl"/>
                        <div class="event-box-content">
                            <h3 class="text-3xl md:text-4xl font-great-vibes mb-2 text-white drop-shadow-lg">Reception</h3>
                            <p class="text-lg md:text-xl font-semibold text-white drop-shadow-lg">January 5th, 2026 ‚Ä¢ 5:30 PM ‚Äì 10:00 PM</p>
                            <p class="text-lg md:text-xl text-white drop-shadow-lg">Mor Athanasius Yohan Memorial Convention Centre</p>
                            <p class="text-lg md:text-xl text-white drop-shadow-lg">Kuttappuzha, Thiruvalla</p>
                            <a href="https://www.google.com/maps/search/?api=1&query=Mor+Athanasius+Yohan+Memorial+Convention+Centre,+Kuttappuzha,+Thiruvalla" target="_blank" rel="noopener noreferrer" class="btn-primary mt-3 inline-block">Get Directions</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Collapsible Travel Directions -->
            <div class="w-full md:w-auto max-w-2xl mx-auto mt-8 text-left">
                <button onclick="document.getElementById('travelDirections').classList.toggle('hidden')" 
                    class="w-full text-xl font-semibold text-white bg-dark hover:bg-dark/80 transition p-4 rounded-xl shadow-md text-left">
                    üöó‚úàÔ∏è How to Get to Thiruvalla (Tap to Expand)
                </button>
                <div id="travelDirections" class="hidden bg-dark/70 rounded-xl p-6 mt-4 shadow-inner text-white" style="backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);">
                    <h3 class="text-2xl font-great-vibes text-white mb-4 text-center">Getting to Thiruvalla</h3>
                    <div class="mb-4">
                        <h4 class="text-lg font-semibold text-white mb-1">‚úàÔ∏è From Kochi (Cochin) International Airport (COK)</h4>
                        <ul class="list-disc pl-5 text-white text-md">
                            <li><strong>Taxi:</strong> ~1.5 hours (‚Çπ2,200‚Äì‚Çπ2,700). Pre-book or use Uber Intercity.</li>
                            <li><strong>Train:</strong> Take a cab (~30 min) to Aluva station, then a train to Thiruvalla (~2‚Äì2.5 hrs).</li>
                            <li><strong>Bus:</strong> KSRTC buses to Kottayam, then to Thiruvalla (total ~3 hours).</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-1">‚úàÔ∏è From Trivandrum International Airport (TRV)</h4>
                        <ul class="list-disc pl-5 text-white text-md">
                            <li><strong>Taxi:</strong> ~2.5‚Äì3 hours (‚Çπ3,000‚Äì‚Çπ3,800). GoZo, Savaari, or Uber Intercity are reliable.</li>
                            <li><strong>Train:</strong> Short ride to Trivandrum Central, then train to Thiruvalla (~2.5 hrs).</li>
                            <li><strong>Bus:</strong> Regular KSRTC buses to Thiruvalla (~4 hours, budget-friendly).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Menu Section -->
    <section class="py-16 px-4 text-center menu-section fade-in-section">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">The Wedding Feast</h2>
            <div class="section-divider"></div>
            <p class="text-xl mb-8 text-white">Experience the irresistible flavors of Kerala‚Äîwhere every bite is a celebration of tradition, vibrant spices, and soulful cooking. Our wedding feast promises a true taste of Kerala‚Äôs culinary magic, crafted to delight your senses and create lasting memories.</p>
        </div>
    </section>

    <!-- Our Perfect Equation Section -->
    <section class="equation-section fade-in-section" style="border: none; box-shadow: none;">
        
        <div class="hero-content text-center py-16 px-4" style="border: none; box-shadow: none;">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">Our Perfect Equation</h2>
            <div class="section-divider"></div>
            <p class="text-xl text-white">From laser physics to evolutionary biology, our worlds collided to create the perfect chemistry.</p>
        </div>
        <video 
            class="video-bg" 
            autoplay 
            muted 
            loop 
            playsinline
        >
            <source src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/Video_Generation_with_Romantic_Voice.mp4" type="video/mp4">
            Your browser does not support the video tag. Please <a href="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/Video_Generation_with_Romantic_Voice.mp4" target="_blank" rel="noopener">download the video</a> to view it.
        </video>
    </section>

    <!-- Our Story Section (Now a dynamic grid with pop-up modals) -->
    <section class="py-16 px-4 text-center bg-wedding-section fade-in-section">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">Our Story</h2>
            <div class="section-divider"></div>
            <p class="text-xl mb-8 text-white">Some of our favorite memories together so far.</p>
            <div id="masonry-grid" class="masonry-grid">
                <!-- Photo grid items will be dynamically inserted here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Wedding Party Section -->
    <section class="py-16 px-4 text-center wedding-party-section fade-in-section">
        <div class="max-w-5xl mx-auto">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">Meet Our Family</h2>
            <div class="section-divider"></div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                <div class="text-center family-member-card">
                    <div class="w-40 h-40 mx-auto rounded-full shadow-lg overflow-hidden flex items-center justify-center">
                        <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/Daddy_mummy.jpg" alt="Parents of the Bride" class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-2xl font-great-vibes mt-4 text-white">Mr. Binny & Mrs. Laly</h3>
                    <p class="text-white">Parents of the Bride</p>
                </div>
                <div class="text-center family-member-card">
                    <div class="w-40 h-40 mx-auto rounded-full shadow-lg overflow-hidden flex items-center justify-center">
                        <img 
                            src="https://github.com/Aswinalex/wedding-invitation/blob/main/appa_amma_2.jpg?raw=true" 
                            alt="Parents of the Groom" 
                            class="object-cover w-full h-full"
                        >
                    </div>
                    <h3 class="text-2xl font-great-vibes mt-4 text-white">Dr. Salim & Mrs. Renu </h3>
                    <p class="text-white">Parents of the Groom</p>
                </div>
                <div class="text-center family-member-card"><img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/Nevil%20Bincy.jpg" alt="Brother and Sister-in-Law" class="w-40 h-40 mx-auto rounded-full shadow-lg object-cover"><h3 class="text-2xl font-great-vibes mt-4 text-white">Mr. Nevil & Mrs. Bincy</h3><p class="text-white">Brother & Sister-in-Law</p></div>
                <div class="text-center flex flex-col items-center family-member-card">
                    <div class="w-40 h-40 mx-auto rounded-full shadow-lg overflow-hidden flex items-center justify-center mb-4">
                        <img 
                            src="https://github.com/Aswinalex/wedding-invitation/blob/main/Nitty.jpg?raw=true" 
                            alt="Sister of the Bride" 
                            class="object-cover w-full h-full"
                        >
                    </div>
                    <h3 class="text-2xl font-great-vibes mt-4 text-white">Dr. Nitty Sara</h3>
                    <p class="text-white">Sister of the Bride</p>
                </div>
                <div class="text-center family-member-card">
                    <div class="w-40 h-40 mx-auto rounded-full shadow-lg overflow-hidden flex items-center justify-center" style="background: #0D4B4F;">
                        <img 
                            src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/ida.jpg?raw=true" 
                            alt="Ida" 
                            class="object-cover w-48 h-48" 
                            style="transform: scale(0.8);"
                        >
                    </div>
                    <h3 class="text-2xl font-great-vibes mt-4 text-white">Ida</h3>
                    <p class="text-white">Sister of the Groom</p>
                </div>
                <div class="text-center family-member-card"><img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/eva%2C%20ema.jpg" alt="Eva & Ema" class="w-40 h-40 mx-auto rounded-full shadow-lg object-cover"><h3 class="text-2xl font-great-vibes mt-4 text-white">Eva & Ema</h3><p class="text-white">Our beloved nieces</p>
            </div>
            </div>
        </div>
    </section>
    
    

    <!-- RSVP Section -->
    <section class="py-16 px-4 text-center rsvp-section fade-in-section">
        <div class="max-w-2xl mx-auto">
        <h2 class="text-5xl font-great-vibes mb-4 text-white">RSVP</h2>
        <div class="section-divider"></div>
        <p class="text-xl mb-8 text-white">Kindly respond by October 1st, 2025 so we can finalize our arrangements.</p>
        <form id="rsvpForm" class="text-left space-y-4">
            <input type="text" name="Name" placeholder="Your Name(s)" required class="w-full p-3 rounded-lg border border-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-lg text-black bg-white">
            <select name="Attending" required class="w-full p-3 rounded-lg border border-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-lg text-black bg-white" title="Attendance selection">
            <option value="" disabled selected>Will you be attending?</option>
            <option value="Yes, with pleasure!">Yes, with pleasure!</option>
            <option value="No, with regrets.">No, with regrets.</option>
            </select>
            <input type="number" name="Guests" placeholder="Number of guests" min="0" required class="w-full p-3 rounded-lg border border-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-lg text-black bg-white">
            <textarea name="Message" placeholder="Optional message (Let us know if we have to arrange your accomodation either on 4th or 5th Jan or both)" rows="3" class="w-full p-3 rounded-lg border border-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-lg text-black bg-white"></textarea>
            <div class="text-center">
            <button type="submit" id="rsvpSubmitBtn" class="btn-primary inline-flex items-center text-lg font-semibold shadow-md hover:shadow-lg">Submit RSVP<span id="rsvpLoadingSpinner" class="loading-spinner hidden"></span></button>
            </div>
        </form>
        <div id="rsvpMessage" class="mt-4 text-white"></div>
        </div>
    </section>

    <!-- Guestbook Section -->
    <section class="py-16 px-4 text-center guestbook-section fade-in-section">
        <div class="max-w-4xl mx-auto">
        <h2 class="text-5xl font-great-vibes mb-4 text-white">Guestbook</h2>
        <div class="section-divider"></div>
        <p class="text-xl mb-8 text-white">Leave a message for the happy couple!</p>
        <form id="guestbookForm" class="text-left space-y-4 mb-8">
            <input type="text" id="guestName" placeholder="Your Name" required class="w-full p-3 rounded-lg border border-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-lg text-black bg-white">
            <textarea id="guestMessage" placeholder="Your message" required rows="4" class="w-full p-3 rounded-lg border border-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-lg text-black bg-white"></textarea>
            <div class="text-center">
            <button type="submit" class="btn-primary inline-flex items-center text-lg font-semibold shadow-md hover:shadow-lg">Post Message<span id="guestbookLoadingSpinner" class="loading-spinner hidden"></span></button>
            </div>
        </form>
        <div id="guestbookDisplay" class="space-y-4 bg-dark p-6 rounded-lg text-white"><p class="text-white">Loading messages...</p></div>
        </div>
    </section>

    <!-- AI Dress Code Advisor Section -->
    <section class="py-16 px-4 text-center dresscode-section fade-in-section">
        <div class="max-w-2xl mx-auto">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">Dress Code Advisor</h2>
            <div class="section-divider"></div>
            <p class="text-xl mb-8 text-white">Have a question about what to wear? Our AI assistant can help! The dress code is formal or festive wear.</p>
            <div class="space-y-4 text-left">
                <input type="text" id="dressCodeQuery" placeholder="e.g., 'Is a floral summer dress okay?'" class="w-full p-3 rounded-lg border border-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent text-lg text-black bg-white">
                <div class="text-center">
                    <button id="dressCodeBtn" class="btn-primary inline-flex items-center text-lg font-semibold shadow-md hover:shadow-lg">Ask Assistant<span id="dressCodeSpinner" class="loading-spinner hidden"></span></button>
                </div>
                <div id="dressCodeResponse" class="p-4 bg-dark rounded-lg border border-white/20 min-h-[50px] text-white text-lg">Your answer will appear here...</div>
            </div>
        </div>
    </section>
    <!-- Local Favorites Section -->
    <section class="py-16 px-4 text-center local-favorites-section fade-in-section">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">Our Local Favorites</h2>
            <div class="section-divider"></div>
            <p class="text-xl mb-8 text-white">If you have some extra time, here are a few of our favorite spots near Thiruvalla!</p>

            <!-- Grid of attractions -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-left">
                <!-- Uptown Shack -->
                <div class="p-6 rounded-xl shadow-lg border border-white text-center" style="background-color: #0d59529e;;">
                    <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/uptowwn%20shack.webp" alt="Uptown Shack" class="w-full h-48 object-cover rounded-md mb-4">
                    <div class="text-4xl mb-2 text-black">‚òï</div>
                    <h3 class="text-2xl font-great-vibes text-black">Favorite Rooftop Cafe</h3>
                    <p class="font-semibold text-black">Uptown Shack</p>
                    <p class="text-sm text-black mb-2">For a rooftop shack dining experience</p>
                    <a href="https://www.google.com/maps?q=Uptown+Shack+Thiruvalla" target="_blank" class="text-sm text-[#800000] font-bold underline">View on Map</a>
                </div>

                <!-- Pamba River Walk -->
                <div class="p-6 rounded-xl shadow-lg border border-white text-center" style="background-color: #0d59529e;">
                    <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/pampa.webp" alt="Pamba River Walk" class="w-full h-48 object-cover rounded-md mb-4">
                    <div class="text-4xl mb-2 text-black">üèûÔ∏è</div>
                    <h3 class="text-2xl font-great-vibes text-black">Scenic Walk</h3>
                    <p class="font-semibold text-black">Pamba River Walk</p>
                    <p class="text-sm text-black mb-2">A beautiful and peaceful walk along the riverbanks.</p>
                    <a href="https://www.google.com/maps?q=Pamba+River+Walk+Thiruvalla" target="_blank" class="text-sm text-[#800000] font-bold underline">View on Map</a>
                </div>

                <!-- Avees Puttu House -->
                <div class="p-6 rounded-xl shadow-lg border border-white text-center" style="background-color: #0d59529e;">
                    <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/aavees.webp" alt="Avees Puttu House" class="w-full h-48 object-cover rounded-md mb-4">
                    <div class="text-4xl mb-2 text-black">üçΩÔ∏è</div>
                    <h3 class="text-2xl font-great-vibes text-black">Must-Try Food</h3>
                    <p class="font-semibold text-black">Avees Puttu House</p>
                    <p class="text-sm text-black mb-2">For authentic and delicious Kerala cuisine.</p>
                    <a href="https://www.google.com/maps?q=Avees+Puttu+House+Thiruvalla" target="_blank" class="text-sm text-[#800000] font-bold underline">View on Map</a>
                </div>

                <!-- Bhoothakuzhy Para -->
                <div class="p-6 rounded-xl shadow-lg border border-white text-center" style="background-color: #0d59529e;">
                    <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/bhoothakuzhy.webp?raw=true" alt="Bhoothakuzhy Para" class="w-full h-48 object-cover rounded-md mb-4">
                    <div class="text-4xl mb-2 text-black">ü™®</div>
                    <h3 class="text-2xl font-great-vibes text-black">Hidden Gem</h3>
                    <p class="font-semibold text-black">Bhoothakuzhy Para</p>
                    <p class="text-sm text-black mb-2">A quiet scenic spot perfect for nature lovers and photo ops.</p>
                    <a href="https://www.google.com/maps?q=Bhoothakuzhy+Para" target="_blank" class="text-sm text-[#800000] font-bold underline">View on Map</a>
                </div>

                <!-- Vengal Viewpoint -->
                <div class="p-6 rounded-xl shadow-lg border border-white text-center" style="background-color: #0d59529e;">
                    <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/vengal.webp?raw=true" alt="Vengal Viewpoint" class="w-full h-48 object-cover rounded-md mb-4">
                    <div class="text-4xl mb-2 text-black">üåÖ</div>
                    <h3 class="text-2xl font-great-vibes text-black">Sunset Spot</h3>
                    <p class="font-semibold text-black">Vengal Viewpoint</p>
                    <p class="text-sm text-black mb-2">Catch stunning sunsets and panoramic views over the hills.</p>
                    <a href="https://www.google.com/maps?q=Vengal+Viewpoint,+Kerala" target="_blank" class="text-sm text-[#800000] font-bold underline">View on Map</a>
                </div>

                <!-- Aruvikuzhy Waterfalls -->
                <div class="p-6 rounded-xl shadow-lg border border-white text-center" style="background-color: #0d59529e;">
                    <img src="https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/aruvikuzhy.webp" alt="Aruvikuzhy Waterfalls" class="w-full h-48 object-cover rounded-md mb-4">
                    <div class="text-4xl mb-2 text-black">üíß</div>
                    <h3 class="text-2xl font-great-vibes text-black">Waterfall Wonder</h3>
                    <p class="font-semibold text-black">Aruvikuzhy Waterfalls</p>
                    <p class="text-sm text-black mb-2">A refreshing spot for a quick nature escape and waterfall views.</p>
                    <a href="https://www.google.com/maps?q=Aruvikuzhy+Waterfalls" target="_blank" class="text-sm text-[#800000] font-bold underline">View on Map</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Photo Gallery Teaser Section -->
    <section class="py-16 px-4 text-center bg-wedding-section fade-in-section">
        <div class="max-w-2xl mx-auto">
            <h2 class="text-5xl font-great-vibes mb-4 text-white">Our Wedding Gallery</h2>
            <div class="section-divider"></div>
            <p class="text-xl mb-8 text-white">We'll be sharing photos from our special day here. Please check back after January 5th!</p>
            <a href="#" class="btn-primary inline-block text-lg font-semibold shadow-md opacity-50 cursor-not-allowed">
                Coming Soon
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[#0D4B4F] text-white py-8 px-4 text-center rounded-t-xl">
        <div class="max-w-4xl mx-auto">
            <p class="text-2xl mb-2 font-great-vibes text-white">We can't wait to celebrate with you!</p>
            <p class="text-sm mb-2 text-white">With love from our families</p>
            <p class="text-sm text-white">¬© 2026 Taniya & Aswin. All Rights Reserved.</p>
            <div class="mt-4">
                <button id="copyUserIdBtn" class="text-xs text-white/50 hover:text-white">Copy Admin ID: <span id="userIdDisplay"></span></button>
            </div>
        </div>
    </footer>

    <!-- Music Control Bar - A new, persistent element at the bottom of the page -->
    <div id="musicControls" class="fixed bottom-0 left-0 right-0 z-50 bg-gray-800 bg-opacity-70 backdrop-blur-md p-4 flex items-center justify-center space-x-4 rounded-t-xl shadow-lg" style="backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);">
        <button id="playPauseBtn" class="bg-yellow-400 text-black p-2 rounded-full shadow-md hover:bg-yellow-500 transition">
            <!-- Play icon -->
            <svg id="playIcon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4.004a1 1 0 001.555.832l3.444-2.002a1 1 0 000-1.664l-3.444-2.002z" clip-rule="evenodd" />
            </svg>
            <!-- Pause icon (hidden) -->
            <svg id="pauseIcon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
            </svg>
        </button>
        <button id="muteBtn" class="bg-gray-600 text-white p-2 rounded-full shadow-md hover:bg-gray-700 transition">
            <!-- Speaker icon -->
            <svg id="speakerIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>
            <!-- Muted icon (hidden) -->
            <svg id="mutedIcon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg>
        </button>
    </div>

    <script type="module">
        // --- Firebase Imports (needed for Guestbook only) ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, doc, deleteDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        // --- Global Firebase instances and user state ---
        let db = null;
        let auth = null;
        let userId = null;
        let isAuthReady = false;

        // --- IMPORTANT: Paste your deployed Google Apps Script Web App URL here ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwhgKz9-l3TcUuZ27i5EVk8-dGjJPIkfb3TUjbqsSaVrHF_8n0QwW0jOwMvXQCGj19Flg/exec";

        // --- Main Page Logic ---
        document.addEventListener('DOMContentLoaded', async () => {
            
            // --- Background Music (MP3) ---
            const playPauseBtn = document.getElementById('playPauseBtn');
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            const muteBtn = document.getElementById('muteBtn');
            const speakerIcon = document.getElementById('speakerIcon');
            const mutedIcon = document.getElementById('mutedIcon');

            let musicStarted = false;
            let isMuted = false;

            const bgAudio = document.createElement('audio');
            bgAudio.src = 'https://github.com/Aswinalex/wedding-invitation/blob/main/wedding-251610.mp3?raw=true';
            bgAudio.loop = true;
            bgAudio.preload = 'auto';
            bgAudio.volume = 0.5;
            bgAudio.style.display = 'none';
            document.body.appendChild(bgAudio);

            const startMusic = () => {
                if (musicStarted) return;
                bgAudio.play().catch(() => {});
                musicStarted = true;
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            };

            document.body.addEventListener('click', (e) => {
                if (!musicStarted) {
                    startMusic();
                }
            }, { once: true });

            playPauseBtn.addEventListener('click', () => {
                if (!musicStarted) {
                    startMusic();
                } else if (bgAudio.paused) {
                    bgAudio.play();
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                } else {
                    bgAudio.pause();
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                }
            });

            muteBtn.addEventListener('click', () => {
                isMuted = !isMuted;
                bgAudio.muted = isMuted;
                speakerIcon.classList.toggle('hidden', isMuted);
                mutedIcon.classList.toggle('hidden', !isMuted);
            });


            // --- Countdown Timer with animation ---
            const countdownDate = new Date("January 5, 2026 15:00:00").getTime();
            const numberElements = {
                days: document.getElementById('days'),
                hours: document.getElementById('hours'),
                minutes: document.getElementById('minutes'),
                seconds: document.getElementById('seconds'),
            };

            const animateNumber = (element, newValue) => {
                const oldValue = element.textContent;
                if (oldValue !== newValue) {
                    element.classList.add('animate-flip');
                    element.addEventListener('animationend', () => {
                        element.classList.remove('animate-flip');
                        element.textContent = newValue;
                    }, { once: true });
                }
            };
            
            const countdownInterval = setInterval(() => {
                const now = new Date().getTime();
                const distance = countdownDate - now;
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                const seconds = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');

                animateNumber(numberElements.days, days);
                animateNumber(numberElements.hours, hours);
                animateNumber(numberElements.minutes, minutes);
                animateNumber(numberElements.seconds, seconds);
                
                if (distance < 0) { 
                    clearInterval(countdownInterval); 
                    document.getElementById('countdown').innerHTML = "<p class='col-span-4 text-2xl'>The day is here!</p>"; 
                }
            }, 1000);

            // --- Scroll Animations ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        const video = entry.target.querySelector('video');
                        if (video && video.paused) {
                            video.play().catch(() => {});
                        }
                    } else {
                        entry.target.classList.remove('is-visible');
                        const video = entry.target.querySelector('video');
                        if (video && !video.paused) {
                            video.pause();
                        }
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in-section').forEach(section => {
                observer.observe(section);
            });

            // --- Our Story Masonry Grid Logic ---
            const masonryGrid = document.getElementById('masonry-grid');
            // Reordered photos for better storytelling flow
            const photos = [
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/IMG-20250427-WA0089.jpg", alt: "Taniya and Aswin in a field of yellow flowers", caption: "Golden Hour: Bathed in the glow of the golden hour, we found our hearts beating to the same rhythm. This picture captures our pure joy.", objectPosition: 'bottom bottom' },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/IMG20250425153546.jpg", alt: "Taniya and Aswin in front of the Louvre", caption: "A Parisian Adventure: In Paris, the city of love, our own love story began. With the Louvre as our backdrop, every moment felt like a masterpiece.", objectPosition: 'center bottom' },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/IMG-20250427-WA0029.jpg", alt: "Taniya and Aswin embracing", caption: "Mountain Views: Finding our own world in the heart of nature, surrounded by mountains and a love that feels as grand as the scenery." },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/IMG-20250429-WA0030.jpg", alt: "Taniya and Aswin by a lake", caption: "Lakeside Serenity: A serene moment by the lake, where our joy is the only sound and our love is the only view that matters.", objectPosition: 'center top' },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2014.17.22_e07bf8fc.jpg", alt: "Taniya and Aswin", caption: "A New Chapter: This is where our new chapter begins. Carrying her on his back, he promises to carry her in his heart forever." },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2015.56.58_9a005fbc.jpg", alt: "Taniya and Aswin holding hands", caption: "Together Always: Hand in hand, we walked toward a future of beautiful adventures, together forever.", objectPosition: 'center bottom' },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2014.18.53_d10a8b64.jpg", alt: "Movie", caption: "Our first Movie together: Our first movie date, watching 'Barroz' with Mohanlal. The movie might not have been a blockbuster, but every second spent with you was.", objectPosition: 'center bottom' },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2014.18.54_ed92f7d9.jpg", alt: "Car journey", caption: "Forever Starts Here: Our very first car journey together‚Äîfilled with dreams of the road ahead." },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2014.15.41_027a3b70.jpg", alt: "Taniya and Aswin Rhine riveron the back", caption: "Germany's Rhine River: On the banks of the Rhine in Germany, we began to dream of a lifetime of adventures together." },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2014.18.53_23600209.jpg", alt: "Pennukaanal scenes", caption: "Pennukaanal scenes: The 'Pennukaanal' ceremony: a beautiful beginning where two families became one, filled with tradition and love.", objectPosition: 'center bottom' },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2015.57.00_d4b99e94.jpg", alt: "Elegant", caption: "Elegance and love intertwined: A new story unfolds: two hearts intertwined, celebrating a love that is both elegant and real." },
                { src: "https://raw.githubusercontent.com/Aswinalex/wedding-invitation/main/WhatsApp%20Image%202025-08-01%20at%2014.18.52_5091d856.jpg", alt: "Metro", caption: "Our German metro adventure!: Lost in the bustle of the German metro, we found everything we needed right there, in each other's eyes.", objectPosition: 'center bottom' }
            ];

            const renderMasonryGrid = () => {
                masonryGrid.innerHTML = '';
                photos.forEach((photo, index) => {
                    const item = document.createElement('div');
                    item.className = 'masonry-item';

                    const img = document.createElement('img');
                    img.src = photo.src;
                    img.alt = photo.alt;
                    img.className = 'w-full h-auto object-cover rounded-md';
                    img.loading = 'lazy';
                    
                    if (photo.objectPosition) {
                        img.style.objectPosition = photo.objectPosition;
                    }

                    const captionBox = document.createElement('div');
                    captionBox.className = 'masonry-caption text-sm text-white/90 rounded-b-md';
                    captionBox.innerHTML = `
                        <p class="font-semibold text-white">${photo.caption.split(':')[0]}</p>
                        <p class="text-white text-xs mt-1">${photo.caption.split(':')[1]}</p>
                    `;

                    item.appendChild(img);
                    item.appendChild(captionBox);
                    masonryGrid.appendChild(item);
                });
            };

            renderMasonryGrid();


            // --- Firebase Initialization and Auth ---
            // --- Inject Firebase config and app ID FIRST ---
            window.__firebase_config = JSON.stringify({
            apiKey: "AIzaSyDbZgEemDAd0-g8rCOEgkjflwgQfe2_Sew",
            authDomain: "wedding-aswin-taniya.firebaseapp.com",
            projectId: "wedding-aswin-taniya",
            storageBucket: "wedding-aswin-taniya.firebasestorage.app",
            messagingSenderId: "310162251053",
            appId: "1:310162251053:web:1a24dbf68f0bd4679587a4"
            });
            window.__app_id = "wedding-aswin-taniya";
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
            
            try {
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        isAuthReady = true;
                        document.getElementById('userIdDisplay').textContent = userId;
                        setupGuestbookListener();
                    } else {
                        try {
                            await signInAnonymously(auth);
                        } catch (error) {
                            console.error("Authentication Error:", error);
                            displayAuthError();
                        }
                    }
                });
            } catch (error) {
                console.error("Firebase Initialization Error:", error);
                displayAuthError();
            }

            function displayAuthError() {
                const guestbookDisplay = document.getElementById('guestbookDisplay');
                const rsvpForm = document.getElementById('rsvpForm');
                if (guestbookDisplay) {
                    guestbookDisplay.innerHTML = '<p class="text-white text-center">Guestbook is currently unavailable. Please try reloading the page.</p>';
                }
                const guestbookForm = document.getElementById('guestbookForm');
                if (guestbookForm) {
                    guestbookForm.style.display = 'none';
                }
                if (rsvpForm) {
                    rsvpForm.innerHTML = '<p class="text-white text-center">RSVP feature is currently unavailable. Please try reloading the page.</p>';
                }
            }

            // --- RSVP Form Logic with Google Apps Script ---
            const rsvpForm = document.getElementById('rsvpForm');
            const rsvpMessage = document.getElementById('rsvpMessage');
            const rsvpLoadingSpinner = document.getElementById('rsvpLoadingSpinner');
            const rsvpSubmitBtn = document.getElementById('rsvpSubmitBtn');
            
            if (rsvpForm) {
                rsvpForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    rsvpLoadingSpinner.classList.remove('hidden');
                    rsvpSubmitBtn.disabled = true;

                    // if (SCRIPT_URL === "https://script.google.com/macros/s/AKfycbwhgKz9-l3TcUuZ27i5EVk8-dGjJPIkfb3TUjbqsSaVrHF_8n0QwW0jOwMvXQCGj19Flg/exec") {
                    //  rsvpMessage.textContent = "Please set up your Google Apps Script and paste the URL in the code.";
                    //  rsvpMessage.className = 'text-white font-semibold mt-4';
                    //  rsvpLoadingSpinner.classList.add('hidden');
                    //  rsvpSubmitBtn.disabled = false;
                    //  return;
                    // }

                    const formData = new FormData(rsvpForm);
                    const rsvpData = Object.fromEntries(formData.entries());

                    try {
                        const response = await fetch(SCRIPT_URL, {
                            method: 'POST',
                            mode: 'no-cors', // Required for Google Apps Script to work
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded',
                            },
                            body: new URLSearchParams(rsvpData)
                        });

                        // We can't check response.ok with no-cors, so we assume success
                        // The Apps Script will handle the sheet update.
                        rsvpMessage.textContent = "Thank you for your RSVP! We can't wait to see you.";
                        rsvpMessage.className = 'text-green-600 font-semibold mt-4';
                        rsvpForm.reset();
                    } catch (error) {
                        console.error("Error submitting RSVP: ", error);
                        rsvpMessage.textContent = "Oops! Something went wrong. Please try again.";
                        rsvpMessage.className = 'text-red-600 font-semibold mt-4';
                    } finally {
                        rsvpLoadingSpinner.classList.add('hidden');
                        rsvpSubmitBtn.disabled = false;
                    }
                });
            }

            // --- Guestbook Logic with Firestore ---
            const guestbookForm = document.getElementById('guestbookForm');
            const guestbookLoadingSpinner = document.getElementById('guestbookLoadingSpinner');
            const guestbookDisplay = document.getElementById('guestbookDisplay');
            const deleteModal = document.getElementById('deleteModal');
            const confirmDeleteBtn = document.getElementById('confirmDelete');
            const cancelDeleteBtn = document.getElementById('cancelDelete');
            let messageToDeleteId = null;

            function setupGuestbookListener() {
                const guestbookCollectionRef = collection(db, `/artifacts/${appId}/public/data/guestbook`);
                onSnapshot(guestbookCollectionRef, (snapshot) => {
                    if (guestbookDisplay) {
                        guestbookDisplay.innerHTML = '';
                        const messages = [];
                        snapshot.forEach(doc => {
                            const data = doc.data();
                            messages.push({ ...data, id: doc.id });
                        });

                        messages.sort((a, b) => b.timestamp?.seconds - a.timestamp?.seconds);

                        if (messages.length === 0) { 
                            guestbookDisplay.innerHTML = '<p class="text-white">Be the first to leave a message!</p>'; 
                        } else {
                            messages.forEach(message => {
                                const messageEl = document.createElement('div');
                                messageEl.className = 'message relative';
                                let deleteButtonHtml = '';
                                if (message.userId === userId) {
                                    deleteButtonHtml = `<button data-id="${message.id}" class="delete-btn absolute top-2 right-2 text-white/50 hover:text-red-400 text-2xl leading-none">√ó</button>`;
                                }
                                messageEl.innerHTML = `<p class="font-semibold text-xl text-white">${message.name || 'Anonymous'}</p><p class="text-white pr-6">${message.message || ''}</p><p class="text-xs text-white/70 mt-2">${message.timestamp ? new Date(message.timestamp.seconds * 1000).toLocaleString() : 'Just now'}</p>${deleteButtonHtml}`;
                                guestbookDisplay.appendChild(messageEl);
                            });
                        }
                    }
                }, (error) => {
                    console.error("Error getting guestbook messages: ", error);
                    if (guestbookDisplay) {
                        guestbookDisplay.innerHTML = '<p class="text-white">Could not load messages. Please try again later.</p>';
                    }
                });
            }

            if (guestbookDisplay) {
                guestbookDisplay.addEventListener('click', (e) => {
                    if (e.target.classList.contains('delete-btn')) {
                        messageToDeleteId = e.target.dataset.id;
                        deleteModal.classList.remove('hidden');
                        deleteModal.classList.add('flex');
                    }
                });
            }
            
            if (cancelDeleteBtn) {
                cancelDeleteBtn.addEventListener('click', () => {
                    deleteModal.classList.add('hidden');
                    deleteModal.classList.remove('flex');
                    messageToDeleteId = null;
                });
            }

            if (confirmDeleteBtn) {
                confirmDeleteBtn.addEventListener('click', async () => {
                    if (messageToDeleteId) {
                        try {
                            await deleteDoc(doc(db, `/artifacts/${appId}/public/data/guestbook`, messageToDeleteId));
                        } catch (error) {
                            console.error("Error removing document: ", error);
                        } finally {
                            cancelDeleteBtn.click();
                        }
                    }
                });
            }

            if (guestbookForm) {
                guestbookForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    guestbookLoadingSpinner.classList.remove('hidden');
                    try {
                        await addDoc(collection(db, `/artifacts/${appId}/public/data/guestbook`), { name: document.getElementById('guestName').value, message: document.getElementById('guestMessage').value, timestamp: serverTimestamp(), userId: userId });
                        guestbookForm.reset();
                    } catch (error) { 
                        console.error("Error adding document: ", error); 
                    } finally { 
                        guestbookLoadingSpinner.classList.add('hidden'); 
                    }
                });
            }

            const copyUserIdBtn = document.getElementById('copyUserIdBtn');
            if (copyUserIdBtn) {
                copyUserIdBtn.addEventListener('click', () => {
                    const tempInput = document.createElement('input');
                    document.body.appendChild(tempInput);
                    tempInput.value = userId;
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);
                    copyUserIdBtn.textContent = 'Copied!';
                    setTimeout(() => { copyUserIdBtn.textContent = `Copy Admin ID: ${userId}`; }, 2000);
                });
            }

            // --- AI Dress Code Advisor with Gemini API ---
            const dressCodeBtn = document.getElementById('dressCodeBtn');
            const dressCodeQuery = document.getElementById('dressCodeQuery');
            const dressCodeResponse = document.getElementById('dressCodeResponse');
            const dressCodeSpinner = document.getElementById('dressCodeSpinner');
            
            async function generateResponseWithRetry(prompt) {
                const maxRetries = 3;
                const baseDelay = 1000;
                let retries = 0;
                
                while (retries < maxRetries) {
                    try {
                        let chatHistory = [];
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        const payload = { contents: chatHistory };
                        const apiKey = "AIzaSyC75y_X7I9dYq5ecxEhxFdN7BOuOTAkc38";
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                        
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            throw new Error(`API call failed with status: ${response.status}`);
                        }

                        const result = await response.json();
                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            return result.candidates[0].content.parts[0].text;
                        } else {
                            throw new Error('Unexpected API response structure.');
                        }
                    } catch (error) {
                        console.error(`Attempt ${retries + 1} failed: ${error.message}`);
                        retries++;
                        if (retries < maxRetries) {
                            const delay = baseDelay * Math.pow(2, retries);
                            await new Promise(res => setTimeout(res, delay));
                        } else {
                            return "I'm sorry, I'm having trouble with the request. Please try again later.";
                        }
                    }
                }
                return "I'm sorry, I'm having trouble with the request. Please try again later.";
            }

            if (dressCodeBtn) {
                dressCodeBtn.addEventListener('click', async () => {
                    const query = dressCodeQuery.value;
                    if (!query) {
                        dressCodeResponse.textContent = "Please enter a question.";
                        return;
                    }
                    
                    dressCodeSpinner.classList.remove('hidden');
                    dressCodeBtn.disabled = true;
                    dressCodeResponse.textContent = 'Thinking...';
                    
                    const fullPrompt = `You are a helpful wedding dress code advisor for a wedding in Thiruvalla, Kerala. The dress code is "formal or festive wear". The guests are asking questions about what to wear. Your response should be friendly and helpful. Do not mention your name or model. Keep the response concise. Here is the guest's question: "${query}"`;
                    
                    const responseText = await generateResponseWithRetry(fullPrompt);
                    
                    dressCodeResponse.textContent = responseText;
                    dressCodeSpinner.classList.add('hidden');
                    dressCodeBtn.disabled = false;
                });
            }
        });
    </script>
</body>
</html>
